# 快速驗證指南

**日期**: 2025-10-16
**目的**: 驗證最新的 Bug 修復

---

## 🎯 本次修復內容

1. **API Key 載入時序問題** - 修復非同步載入導致的誤判
2. **移除干擾性警告** - 首次載入時不再跳出 Toast 警告
3. **API Key 顯示/隱藏功能** - 新增切換按鈕控制 API Key 可見性

---

## ⚡ 快速測試步驟（5 分鐘）

### 步驟 1：清除舊資料 ✨
開啟 Chrome DevTools (F12) → Console 面板 → 執行：
```javascript
localStorage.clear();
location.reload();
```

### 步驟 2：驗證首次載入體驗 ✅
**預期結果**：
- ✅ **不應該**看到任何 Toast 警告跳出
- ✅ API Key 面板自動展開
- ✅ 顯示「尚未設定 API Key」提示文字
- ✅ 頁面乾淨清爽，沒有干擾

### 步驟 3：新增測試 API Key ✅
在 API Key 輸入框輸入：
```
AIzaSyTestKey123456789ABCDEFGHIJKLMNOPQRST
```
點擊「新增 Key」按鈕

**預期結果**：
- ✅ 顯示「API Key 已新增！」成功通知
- ✅ API Key 出現在列表中
- ✅ 預設顯示為遮罩格式（例如：AIza****QRST）
- ✅ 有「顯示 API Keys」切換按鈕（👁️ 圖示）

### 步驟 4：測試顯示/隱藏功能 ✅
點擊「顯示 API Keys」按鈕

**預期結果**：
- ✅ 按鈕文字變為「隱藏 API Keys」
- ✅ 圖示變為 🙈
- ✅ API Key 完整顯示（可以看到完整字串）
- ✅ 出現複製按鈕（📋）

點擊複製按鈕

**預期結果**：
- ✅ 顯示「API Key 已複製！」通知
- ✅ 可以貼上到記事本驗證（Ctrl+V）

再次點擊切換按鈕（隱藏）

**預期結果**：
- ✅ 按鈕文字變回「顯示 API Keys」
- ✅ 圖示變回 👁️
- ✅ API Key 重新遮罩
- ✅ 複製按鈕消失

### 步驟 5：測試重新載入 ✅
按 F5 重新載入頁面

**預期結果**：
- ✅ **不應該**看到任何警告
- ✅ API Key 正確載入並顯示在列表中
- ✅ API Key 預設為遮罩狀態
- ✅ API Key 面板可以正常收合

### 步驟 6：測試轉換功能警告 ✅
1. 刪除所有 API Keys
2. 在輸入框輸入：「如何學習 JavaScript？」
3. 點擊「轉換」按鈕

**預期結果**：
- ✅ **此時應該**顯示警告：「請先新增至少一個 API Key」
- ✅ API Key 面板自動開啟
- ✅ 轉換不執行（正確阻止）

---

## 📋 完整檢查清單

### 初始化測試
- [ ] 首次載入不顯示 Toast 警告
- [ ] API Key 面板自動展開（無 Key 時）
- [ ] Console 沒有錯誤訊息

### API Key 管理測試
- [ ] 可以成功新增 API Key
- [ ] API Key 預設顯示為遮罩
- [ ] 有顯示/隱藏切換按鈕
- [ ] 切換按鈕運作正常
- [ ] 複製功能正常運作
- [ ] 刪除功能正常運作

### 持久化測試
- [ ] 重新載入後 API Key 正確顯示
- [ ] 不會出現重複載入警告
- [ ] API Key 狀態正確保持

### 轉換功能測試
- [ ] 無 API Key 時轉換會顯示警告
- [ ] 有 API Key 時可以正常轉換（需真實 Key）

---

## 🐛 如果發現問題

### Console 檢查
開啟 DevTools (F12) → Console 面板

**應該看到**：
```
[APIManager] API 管理器已載入
[StorageManager] 儲存管理器已載入
[CryptoManager] 加密管理器已載入
...
[App] 初始化應用程式...
[APIManager] 已載入 X 組 API Keys  ← 確認這行出現
[App] 應用程式初始化完成
[App] 應用程式已啟動
```

**不應該看到**：
- ❌ 任何紅色錯誤訊息
- ❌ `Uncaught` 開頭的錯誤
- ❌ `Failed to` 開頭的錯誤

### 問題回報格式
如果發現問題，請提供：
1. 具體操作步驟
2. 預期結果
3. 實際結果
4. Console 錯誤訊息（如果有）
5. 螢幕截圖（如果可以）

---

## ⏱️ 預計測試時間

- **最小測試**（步驟 1-3）：2 分鐘
- **標準測試**（步驟 1-5）：5 分鐘
- **完整測試**（所有步驟 + 檢查清單）：10 分鐘

---

## ✅ 測試完成確認

完成測試後，請確認：
- [ ] 所有核心功能正常運作
- [ ] 沒有 Console 錯誤
- [ ] UX 體驗流暢不卡頓
- [ ] 符合所有預期結果

**測試者簽名**: _______________
**測試日期**: _______________
**測試結果**: ⭕ 通過 / ❌ 未通過

---

**感謝您的測試！您的反饋將幫助我們持續改進產品品質。**
