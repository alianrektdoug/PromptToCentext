# 提示詞範本庫規格

## 新增的需求

### 需求：範本庫管理
應提供預設的提示詞範本庫，讓使用者可以快速選擇常用的提示詞類型。

#### 情境：載入預設範本
- **當** 應用程式啟動時
- **則** 應載入預設的提示詞範本庫
- **且** 範本應包含以下類別：
  - 程式開發（程式碼審查、Bug 修復、功能實作）
  - 技術文件（API 文件、使用手冊、技術規格）
  - 學習教學（教學大綱、練習題、概念解釋）
  - 創意寫作（故事情節、角色設定、對話撰寫）
  - 商業分析（市場研究、競爭分析、SWOT 分析）
- **且** 每個範本應包含：
  - 名稱
  - 描述
  - 適用場景
  - 範本內容（包含變數）

#### 情境：顯示範本庫 UI
- **當** 使用者點擊「範本庫」按鈕
- **則** 應顯示範本選擇面板
- **且** 應按類別分組顯示範本
- **且** 每個範本應顯示：
  - 圖示
  - 名稱
  - 簡短描述
  - 標籤（分類標籤）
- **且** 應提供搜尋功能（名稱和描述）
- **且** 應提供篩選功能（按類別）

### 需求：使用範本
使用者應能選擇範本並填入變數以生成提示詞。

#### 情境：選擇範本
- **當** 使用者點擊某個範本
- **則** 應顯示範本預覽和變數輸入表單
- **且** 應顯示範本完整描述和使用說明
- **且** 應識別範本中的變數（例如：`{{variable_name}}`）
- **且** 應為每個變數提供輸入欄位
- **且** 變數欄位應包含：
  - 變數名稱
  - 說明文字
  - 輸入框或下拉選單（視變數類型）
  - 預設值（如果有）

#### 情境：填寫範本變數
- **當** 使用者填寫變數值
- **則** 應即時預覽生成的提示詞
- **且** 應驗證必填變數
- **且** 應提供「使用此範本」按鈕
- **且** 點擊按鈕後應將生成的提示詞填入主輸入區
- **且** 應關閉範本選擇面板

### 需求：自訂範本
使用者應能建立、編輯和刪除自己的範本。

#### 情境：建立自訂範本
- **當** 使用者點擊「建立範本」按鈕
- **則** 應顯示範本編輯表單
- **且** 表單應包含：
  - 範本名稱（必填）
  - 範本描述（必填）
  - 類別選擇（下拉選單）
  - 標籤（可選，逗號分隔）
  - 範本內容（textarea，支援變數語法 `{{var}}`）
- **且** 應提供變數插入輔助工具
- **且** 應即時驗證範本語法
- **且** 應顯示預覽

#### 情境：編輯範本
- **當** 使用者點擊範本的「編輯」按鈕
- **則** 應顯示範本編輯表單（預填目前值）
- **且** 不可編輯預設範本（僅能複製後編輯）
- **且** 可以編輯自訂範本
- **且** 儲存後應更新範本庫

#### 情境：刪除範本
- **當** 使用者點擊範本的「刪除」按鈕
- **則** 應顯示確認對話框
- **且** 確認後應從範本庫移除
- **且** 不可刪除預設範本
- **且** 刪除後應更新 UI

### 需求：範本儲存和同步
範本應儲存至本地，並支援匯入/匯出。

#### 情境：儲存範本
- **當** 使用者建立或編輯範本時
- **則** 應儲存至 localStorage
- **且** 應使用結構化格式（JSON）
- **且** 儲存時應包含：
  - 範本 ID（UUID）
  - 建立時間
  - 最後修改時間
  - 使用次數統計

#### 情境：匯出範本
- **當** 使用者點擊「匯出範本」
- **則** 應將選定的範本匯出為 JSON 檔案
- **且** 檔名應包含時間戳記
- **且** 應支援匯出所有自訂範本
- **且** 應支援匯出單個範本

#### 情境：匯入範本
- **當** 使用者點擊「匯入範本」並選擇 JSON 檔案
- **則** 應驗證檔案格式
- **且** 應檢查範本 ID 衝突
- **且** 衝突時應提示使用者選擇：
  - 覆蓋現有範本
  - 保留兩者（為匯入的範本生成新 ID）
  - 跳過匯入
- **且** 匯入成功後應更新範本庫

### 需求：範本分享
應支援分享範本給其他使用者。

#### 情境：生成分享連結
- **當** 使用者點擊範本的「分享」按鈕
- **則** 應生成包含範本資料的 URL
- **且** URL 應使用 Base64 編碼範本 JSON
- **且** 應提供複製連結按鈕
- **且** URL 格式：`https://yourapp.com/#template=<encoded_data>`

#### 情境：從分享連結匯入
- **當** 使用者開啟包含 `#template=` 的 URL
- **則** 應解析並顯示範本預覽
- **且** 應提示「是否新增此範本到範本庫？」
- **且** 確認後應匯入範本
- **且** 應導航到範本庫顯示新範本

### 需求：範本統計
應追蹤範本使用統計。

#### 情境：記錄使用次數
- **當** 使用者使用某個範本時
- **則** 應增加該範本的使用次數
- **且** 應記錄最後使用時間
- **且** 統計應儲存至 localStorage

#### 情境：顯示熱門範本
- **當** 使用者開啟範本庫時
- **則** 應在頂部顯示「最常使用」區塊
- **且** 應顯示使用次數最多的 5 個範本
- **且** 應顯示使用次數標記

### 需求：範本搜尋和篩選
應提供強大的搜尋和篩選功能。

#### 情境：搜尋範本
- **當** 使用者在搜尋框輸入關鍵字
- **則** 應即時搜尋範本名稱和描述
- **且** 應高亮顯示匹配的文字
- **且** 應顯示搜尋結果數量
- **且** 無結果時應顯示提示訊息

#### 情境：按類別篩選
- **當** 使用者選擇類別篩選器
- **則** 應僅顯示該類別的範本
- **且** 應顯示已套用的篩選器
- **且** 應支援多選類別（OR 邏輯）
- **且** 應提供「清除篩選」按鈕

#### 情境：按標籤篩選
- **當** 使用者點擊範本的標籤
- **則** 應篩選顯示包含該標籤的所有範本
- **且** 應支援多個標籤篩選（OR 邏輯）
- **且** 應顯示目前套用的標籤

### 需求：範本預設資料
應提供豐富的預設範本供使用者參考。

#### 情境：程式開發範本
- **當** 載入預設範本時
- **則** 應包含以下範本：
  - **程式碼審查**：
    - 變數：`{{code}}`, `{{language}}`, `{{focus_area}}`
    - 內容：審查程式碼品質、效能、安全性
  - **Bug 修復**：
    - 變數：`{{bug_description}}`, `{{error_message}}`, `{{expected_behavior}}`
    - 內容：分析問題並提供修復建議
  - **功能實作**：
    - 變數：`{{feature_name}}`, `{{requirements}}`, `{{constraints}}`
    - 內容：設計並實作新功能

#### 情境：技術文件範本
- **當** 載入預設範本時
- **則** 應包含以下範本：
  - **API 文件**：
    - 變數：`{{api_name}}`, `{{endpoints}}`, `{{auth_method}}`
  - **使用手冊**：
    - 變數：`{{product_name}}`, `{{target_audience}}`, `{{key_features}}`
  - **技術規格**：
    - 變數：`{{system_name}}`, `{{components}}`, `{{requirements}}`

### 需求：範本版本控制（進階功能，可選）
應支援範本版本追蹤。

#### 情境：儲存範本版本
- **當** 使用者修改範本時
- **則** 應保存舊版本到歷史記錄
- **且** 應記錄版本號（自動遞增）
- **且** 應記錄修改時間和修改描述

#### 情境：檢視範本歷史
- **當** 使用者點擊「版本歷史」按鈕
- **則** 應顯示該範本的所有版本
- **且** 每個版本應顯示：
  - 版本號
  - 修改時間
  - 修改描述
  - 變更摘要
- **且** 應支援預覽舊版本
- **且** 應支援還原到舊版本

### 需求：範本市場（未來功能）
社群範本分享平台（Phase 2）。

#### 情境：瀏覽社群範本
- **當** 使用者開啟「範本市場」
- **則** 應顯示社群貢獻的範本
- **且** 應支援評分和評論
- **且** 應支援下載熱門範本
- **且** 應支援上傳自己的範本
